<div class="container mt-4">
  <h2 class="page-title">{{ parentId ? 'Subcategories ✨' : 'Main Categories ✨' }}</h2>

  <!-- Search Input -->
  <div class="search-section mb-3 d-flex align-items-center">
    <input
      type="text"
      class="custom-input me-2"
      placeholder="Enter category name"
      [(ngModel)]="searchTerm"
      (input)="onSearch()"
    />
    <button class="btn-accent" (click)="clearSearch()" *ngIf="searchTerm">Clear</button>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert-danger">
    {{ errorMessage }}
  </div>

  <!-- Category Table -->
  <table class="custom-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let category of categories">
        <td>{{ category.name }}</td>
        <td>{{ category.description }}</td>
        <td class="actions text-center">
          <a class="btn-primary me-1" [routerLink]="['/categoris/edit', category.id]">Edit</a>
          <button class="btn-warn me-1" (click)="deleteCategory(category.id!)">Delete</button>
          <a
            class="btn-accent me-1"
            *ngIf="!parentId"
            [routerLink]="['/categoris/subcategories', category.id]">View Subcategories</a>
          <a
            class="btn-accent"
            *ngIf="!parentId"
            [routerLink]="['/categoris/add-subcategory', category.id]">Add Subcategory</a>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination (custom) -->


  <!-- Action Buttons -->
  <div class="mt-3 d-flex flex-wrap gap-2">
    <a class="btn-primary" [routerLink]="['/categoris/add']">Add Main Category</a>
    <a class="btn-accent" [routerLink]="['/external']">View External Categories</a>
  </div>
</div>
